import{H as y}from"./Header-d700b98c.js";import{o as l,c as r,a,d as I,r as i,i as v,n as q,t as m,f,m as x,q as w,p as C,s as V}from"./index-ca90286d.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";function N(_,c){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})])}const B={class:"page-container"},S={class:"content-container"},A={class:"import-box"},F=["disabled"],M={key:1,class:"file-name"},T=["disabled"],E={key:0},H={key:1},L=["disabled"],j=I({__name:"ImportacaoView",setup(_){const c=C(),p=i(null),u=i(null),d=i(""),o=i(!1),t=i(""),n=i(!1);function b(){var s;(s=p.value)==null||s.click()}function g(s){const e=s.target;e.files&&e.files.length>0&&(u.value=e.files[0],d.value=u.value.name,t.value="",n.value=!1)}async function k(){if(!u.value){t.value="Por favor, selecione um arquivo primeiro.",n.value=!0;return}o.value=!0,t.value="",n.value=!1;try{const s=await V(u.value);t.value=s.message||"Importação bem-sucedida!",n.value=!1,setTimeout(()=>{c.push({name:"Requisicao"})},2e3)}catch(s){t.value=s.message||"Ocorreu um erro durante a importação.",n.value=!0}finally{o.value=!1}}function h(){c.push({name:"Requisicao"})}return(s,e)=>(l(),r("div",B,[a("div",S,[a("div",A,[v(y),e[2]||(e[2]=a("h2",{class:"title"},"Importação de Requisições",-1)),e[3]||(e[3]=a("p",{class:"subtitle"},"Selecione o arquivo .txt para importar os dados para o sistema.",-1)),t.value?(l(),r("div",{key:0,class:q(["feedback-message",n.value?"feedback-error":"feedback-success"])},m(t.value),3)):f("",!0),a("input",{type:"file",ref_key:"fileInput",ref:p,onChange:g,accept:".txt",class:"hidden-input"},null,544),a("button",{onClick:b,class:"button-select",disabled:o.value},[v(x(N),{class:"icon"}),e[0]||(e[0]=a("span",null,"Selecionar arquivo",-1))],8,F),d.value?(l(),r("p",M,[e[1]||(e[1]=w("Arquivo selecionado: ")),a("strong",null,m(d.value),1)])):f("",!0),e[4]||(e[4]=a("hr",{class:"divider"},null,-1)),a("button",{onClick:k,disabled:!u.value||o.value,class:"button-import"},[o.value?(l(),r("span",E,"Importando...")):(l(),r("span",H,"Confirmar Importação"))],8,T),a("button",{onClick:h,class:"button-tertiary",disabled:o.value}," Ir para Requisições ",8,L)])])]))}});const P=R(j,[["__scopeId","data-v-0ecab9d8"]]);export{P as default};
